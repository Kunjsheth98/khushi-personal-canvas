<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Khushi Mode</title>

<style>
body{
  margin:0;
  font-family: system-ui, sans-serif;
  background: linear-gradient(135deg,#f5e9ff,#ffffff);
  text-align:center;
  padding:16px;
}
h1{color:#6b21a8;margin:6px 0;}
#dayText{font-size:13px;color:#555;}
#modeDisplay{margin:6px 0;font-size:14px;font-weight:600;color:#7c3aed;}
#prompt{font-size:14px;margin:10px 0;color:#444;}

.toolbar{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:10px;
  margin-bottom:10px;
}

button,select,input{
  padding:10px 14px;
  border-radius:18px;
  border:none;
  background:#ede9fe;
  font-size:14px;
  cursor:pointer;
}

canvas{
  background:#fff;
  border-radius:26px;
  display:block;
  margin:14px auto;
  width:96vw;
  max-width:520px;
  height:96vw;
  max-height:520px;
  touch-action:none;
  box-shadow:0 10px 28px rgba(0,0,0,0.08);
}
</style>
</head>

<body>

<h1>KHUSHI MODE</h1>
<div id="dayText"></div>
<div id="modeDisplay">Mode: Paint</div>
<div id="prompt"></div>

<div class="toolbar">
  <button onclick="setMode('paint')">üé® Paint</button>
  <button onclick="setMode('mandala')">üåÄ Mandala</button>
  <button onclick="setMode('doodle')">‚úèÔ∏è Doodle</button>
  <button onclick="setMode('wave')">üåä Wave</button>
  <button onclick="setMode('orbit')">üß¨ Orbit</button>
  <button onclick="setMode('breath')">üå¨Ô∏è Breathe</button>
</div>

<div class="toolbar">
  <input type="color" id="c1" value="#8b5cf6">
  <input type="color" id="c2" value="#ec4899">
  <button onclick="toggleGradient()">üåà Gradient</button>
  <input type="range" id="size" min="6" max="50" value="24">
</div>

<div class="toolbar">
  <select onchange="mandalaType=this.value">
    <option value="classic">Mandala: Classic</option>
    <option value="flower">Flower</option>
    <option value="spiral">Spiral</option>
    <option value="kaleido">Kaleidoscope</option>
  </select>

  <select onchange="doodleType=this.value">
    <option value="ribbon">Doodle: Ribbon</option>
    <option value="infinity">Infinity</option>
    <option value="leaf">Leaf</option>
    <option value="zen">Zen Dots</option>
  </select>
</div>

<canvas id="canvas" width="520" height="520"></canvas>

<script>
/* DAY + PROMPT */
const start=new Date("2024-01-01");
dayText.innerText=`Day ${Math.floor((new Date()-start)/(1000*60*60*24))+1} ‚Äî Welcome back`;

const prompts=[
 "Draw how calm feels today.",
 "Create something soft and kind.",
 "Let your lines breathe slowly.",
 "Draw without planning.",
 "Make something only you understand.",
 "Let go through shapes.",
 "Draw peace, not perfection."
];
prompt.innerText="üñåÔ∏è Today‚Äôs prompt: "+prompts[new Date().getDate()%prompts.length];

/* CANVAS */
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
let drawing=false, mode="paint";
let useGradient=true;
let mandalaType="classic";
let doodleType="ribbon";
let breathPhase=0;

const c1=document.getElementById("c1");
const c2=document.getElementById("c2");
const size=document.getElementById("size");

/* EVENTS */
canvas.addEventListener("mousedown",startDraw);
canvas.addEventListener("mousemove",draw);
canvas.addEventListener("mouseup",()=>drawing=false);
canvas.addEventListener("touchstart",startDraw,{passive:false});
canvas.addEventListener("touchmove",draw,{passive:false});
canvas.addEventListener("touchend",()=>drawing=false);

function setMode(m){
  mode=m;
  modeDisplay.innerText="Mode: "+m.charAt(0).toUpperCase()+m.slice(1);
}

function toggleGradient(){useGradient=!useGradient;}

function startDraw(e){
  drawing=true;
  draw(e);
}

function draw(e){
  if(!drawing)return;
  const r=canvas.getBoundingClientRect();
  const x=(e.touches?e.touches[0].clientX:e.clientX)-r.left;
  const y=(e.touches?e.touches[0].clientY:e.clientY)-r.top;

  if(mode==="paint") paint(x,y);
  if(mode==="mandala") mandala(x,y);
  if(mode==="doodle") doodle(x,y);
  if(mode==="wave") wave(x,y);
  if(mode==="orbit") orbit(x,y);
  if(mode==="breath") breathArt(x,y);
}

function brushFill(x,y){
  if(!useGradient) return c1.value;
  const g=ctx.createLinearGradient(x-size.value,y-size.value,x+size.value,y+size.value);
  g.addColorStop(0,c1.value);
  g.addColorStop(1,c2.value);
  return g;
}

function paint(x,y){
  ctx.fillStyle=brushFill(x,y);
  ctx.beginPath();
  ctx.arc(x,y,size.value,0,Math.PI*2);
  ctx.fill();
}

/* MANDALA */
function mandala(x,y){
  const cx=canvas.width/2, cy=canvas.height/2;
  const dx=x-cx, dy=y-cy;
  const points=12;
  for(let i=0;i<points;i++){
    const a=2*Math.PI/points*i;
    paint(cx+dx*Math.cos(a)-dy*Math.sin(a),
          cy+dx*Math.sin(a)+dy*Math.cos(a));
  }
}

/* DOODLE */
function doodle(x,y){
  ctx.strokeStyle=brushFill(x,y);
  ctx.lineWidth=3;
  ctx.beginPath();
  if(doodleType==="ribbon") ctx.quadraticCurveTo(x,y-size.value,x+size.value,y);
  if(doodleType==="infinity") ctx.bezierCurveTo(x-size.value,y,x,y-size.value,x+size.value,y);
  if(doodleType==="leaf") ctx.ellipse(x,y,size.value,size.value/2,Math.random(),0,Math.PI*2);
  if(doodleType==="zen") ctx.arc(x,y,size.value/3,0,Math.PI*2);
  ctx.stroke();
}

/* OTHER ARTS */
function wave(x,y){
  ctx.strokeStyle=brushFill(x,y);
  ctx.beginPath();
  ctx.moveTo(x-size.value,y);
  ctx.quadraticCurveTo(x,y+size.value,x+size.value,y);
  ctx.stroke();
}

function orbit(x,y){
  for(let i=0;i<6;i++){
    ctx.fillStyle=brushFill(x,y);
    ctx.beginPath();
    ctx.arc(x+Math.cos(i)*size.value,y+Math.sin(i)*size.value,4,0,Math.PI*2);
    ctx.fill();
  }
}

/* BREATHING ART */
function breathArt(x,y){
  breathPhase+=0.05;
  const b=size.value+(Math.sin(breathPhase)*10);
  ctx.fillStyle=brushFill(x,y);
  ctx.beginPath();
  ctx.arc(x,y,b,0,Math.PI*2);
  ctx.fill();
}
</script>

</body>
</html>
